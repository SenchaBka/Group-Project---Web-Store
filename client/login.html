<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Store App - Log in</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">

</head>

<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="login.html">Log in</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Store</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="clientStoreUI.html">Your products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="profile.html">Profile</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <main>

    <div class="registration-box">
      <div id="firebaseui-auth-container"></div>
    </div>


    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>

    <!-- FirebaseUI -->
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

    <script src="credentials.js"></script>
    <script>
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

      // Initialize FirebaseUI
      const ui = new firebaseui.auth.AuthUI(firebase.auth());

      ui.start('#firebaseui-auth-container', {
        signInOptions: [
          firebase.auth.EmailAuthProvider.PROVIDER_ID
        ],
        signInSuccessUrl: 'index.html'
      });

    </script>

    <p id="message" style="display: none;"></p>
    <script>
      // Handle form submission
      document.getElementById('loginForm').addEventListener('submit', function (event) {
        event.preventDefault();
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

        // Sign in with Firebase
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(function (userCredential) {
            // Display a success message
            var messageElement = document.getElementById('message');
            messageElement.textContent = 'Login successful!';
            messageElement.style.display = 'block';

            // After 3 seconds, redirect to index.html
            setTimeout(function () {
              window.location.href = 'index.html';
            }, 1000);
          })
          .catch(function (error) {
            // Handle login errors
            var messageElement = document.getElementById('message');
            messageElement.textContent = 'Error: ' + error.message;
            messageElement.style.display = 'block';
          });
      });


    </script>
  </main>
</body>

</html>